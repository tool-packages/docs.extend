<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <title>@roshin/extend-如何使用该仓库</title>
    <meta name="description" content="">
    <meta name="generator" content="VuePress 1.7.1">
    <link rel="icon" href="/favicon.ico">
    <link rel="manifest" href="/manifest.json">
    <link rel="apple-touch-icon" href="/icons/apple-touch-icon-152x152.png">
    <link rel="mask-icon" href="/icons/safari-pinned-tab.svg" color="#3eaf7c">
    <meta name="description" content="一个轻量级 JS/TS 扩展工具库">
    <meta name="keywords" content="Roshin,JavaScript,js,TypeScript,ts,extend">
    <meta name="baidu-site-verification" content="code-eTtIfh1bRA">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/icons/msapplication-icon-144x144.png">
    <meta name="msapplication-TileColor" content="#000000">
    <link rel="preload" href="/assets/css/0.styles.ad5b6eab.css" as="style"><link rel="preload" href="/assets/js/app.a155bb3e.js" as="script"><link rel="preload" href="/assets/js/2.aab8771d.js" as="script"><link rel="preload" href="/assets/js/18.aceae0a3.js" as="script"><link rel="preload" href="/assets/js/3.4a115da5.js" as="script"><link rel="prefetch" href="/assets/js/10.3b51a8bc.js"><link rel="prefetch" href="/assets/js/11.4e910557.js"><link rel="prefetch" href="/assets/js/12.875f5f17.js"><link rel="prefetch" href="/assets/js/13.871cc697.js"><link rel="prefetch" href="/assets/js/14.b1181daa.js"><link rel="prefetch" href="/assets/js/15.25fc1f80.js"><link rel="prefetch" href="/assets/js/16.1b4fbfdf.js"><link rel="prefetch" href="/assets/js/17.d8902087.js"><link rel="prefetch" href="/assets/js/19.e546b130.js"><link rel="prefetch" href="/assets/js/4.6c2e077d.js"><link rel="prefetch" href="/assets/js/5.a8c3adcb.js"><link rel="prefetch" href="/assets/js/6.b87c7a34.js"><link rel="prefetch" href="/assets/js/7.2479fc6e.js"><link rel="prefetch" href="/assets/js/8.3878332d.js"><link rel="prefetch" href="/assets/js/9.bb975963.js">
    <link rel="stylesheet" href="/assets/css/0.styles.ad5b6eab.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="ant-row"><div class="sidebar-button"><i aria-label="icon: bars" class="anticon anticon-bars"><svg viewBox="0 0 1024 1024" focusable="false" data-icon="bars" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M912 192H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM104 228a56 56 0 1 0 112 0 56 56 0 1 0-112 0zm0 284a56 56 0 1 0 112 0 56 56 0 1 0-112 0zm0 284a56 56 0 1 0 112 0 56 56 0 1 0-112 0z"></path></svg></i> <span></span></div> <div class="ant-col ant-col-xs-24 ant-col-sm-24 ant-col-md-6 ant-col-lg-5 ant-col-xl-5 ant-col-xxl-4"><a href="/" class="router-link-active home-link"><img src="/logo.png" alt="@roshin/extend" class="logo"> <span class="site-name">@roshin/extend</span></a> <div class="search-box mobile-search"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div></div> <div class="ant-col ant-col-xs-0 ant-col-sm-0 ant-col-md-18 ant-col-lg-19 ant-col-xl-19 ant-col-xxl-20"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><ul role="menu" id="nav" class="ant-menu ant-menu-horizontal ant-menu-root ant-menu-light"><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-item"><a href="/guide/introduction.html">
          指南
        </a></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>
          文档
        </span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="visibility:hidden;position:absolute;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li></ul> <a href="https://github.com/tool-packages/extend" target="_blank" rel="noopener noreferrer" class="repo-link"><i aria-label="icon: github" class="anticon anticon-github"><svg viewBox="64 64 896 896" focusable="false" data-icon="github" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M511.6 76.3C264.3 76.2 64 276.4 64 523.5 64 718.9 189.3 885 363.8 946c23.5 5.9 19.9-10.8 19.9-22.2v-77.5c-135.7 15.9-141.2-73.9-150.3-88.9C215 726 171.5 718 184.5 703c30.9-15.9 62.4 4 98.9 57.9 26.4 39.1 77.9 32.5 104 26 5.7-23.5 17.9-44.5 34.7-60.8-140.6-25.2-199.2-111-199.2-213 0-49.5 16.3-95 48.3-131.7-20.4-60.5 1.9-112.3 4.9-120 58.1-5.2 118.5 41.6 123.2 45.3 33-8.9 70.7-13.6 112.9-13.6 42.4 0 80.2 4.9 113.5 13.9 11.3-8.6 67.3-48.8 121.3-43.9 2.9 7.7 24.7 58.3 5.5 118 32.4 36.8 48.9 82.7 48.9 132.3 0 102.2-59 188.1-200 212.9a127.5 127.5 0 0 1 38.1 91v112.5c.8 9 0 17.9 15 17.9 177.1-59.7 304.6-227 304.6-424.1 0-247.2-200.4-447.3-447.5-447.3z"></path></svg></i></a></nav></div></div> <!----></header> <aside class="sidebar"><!----> <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>指南</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/introduction.html" title="介绍" class="sidebar-link">介绍</a></li><li><a href="/guide/install.html" title="安装和使用" class="sidebar-link">安装和使用</a></li><li><a href="/guide/commitConvention.html" title="Git 消息提交规范" class="sidebar-link">Git 消息提交规范</a></li><li><a href="/guide/repo.html" aria-current="page" title="如何使用该仓库" class="active sidebar-link">如何使用该仓库</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide/repo.html#开发设置" title="开发设置" class="sidebar-link">开发设置</a></li><li class="sidebar-sub-header"><a href="/guide/repo.html#构建配置" title="构建配置" class="sidebar-link">构建配置</a></li><li class="sidebar-sub-header"><a href="/guide/repo.html#脚本" title="脚本" class="sidebar-link">脚本</a></li><li class="sidebar-sub-header"><a href="/guide/repo.html#项目结构" title="项目结构" class="sidebar-link">项目结构</a></li><li class="sidebar-sub-header"><a href="/guide/repo.html#测试" title="测试" class="sidebar-link">测试</a></li></ul></li><li><a href="/guide/pull.html" title="Pull Request" class="sidebar-link">Pull Request</a></li></ul></section></li></ul></aside> <main class="page"> <div class="theme-antdocs-content content__default"><h1 id="如何使用该仓库">如何使用该仓库 <a href="#如何使用该仓库" class="header-anchor">#</a></h1> <h2 id="开发设置">开发设置 <a href="#开发设置" class="header-anchor">#</a></h2> <p>你需要 <a href="http://nodejs.org" target="_blank" rel="noopener noreferrer">Node.js 10+<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, 和 <a href="https://yarnpkg.com/en/docs/install" target="_blank" rel="noopener noreferrer">Yarn 1.x<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>克隆项目并切换到相应的开发分支</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">git</span> clone https://github.com/extend-js/extend.git
</code></pre></div><p>安装依赖</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">yarn</span>
</code></pre></div><p>所用工具的概述:</p> <ul><li><p><a href="https://www.typescriptlang.org/" target="_blank" rel="noopener noreferrer">TypeScript<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 作为开发语言</p></li> <li><p><a href="https://rollupjs.org" target="_blank" rel="noopener noreferrer">Rollup<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 用于打包</p></li> <li><p><a href="https://jestjs.io/" target="_blank" rel="noopener noreferrer">Jest<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 用于单元测试</p></li> <li><p><a href="https://prettier.io/" target="_blank" rel="noopener noreferrer">Prettier<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 用于代码格式化</p></li></ul> <h2 id="构建配置">构建配置 <a href="#构建配置" class="header-anchor">#</a></h2> <p>默认情况下, 软件包可以通过 <code>package.json</code> 中的 <code>buildOptions</code> 字段作为打包配置选项：</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;buildOptions&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;js-extend&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;formats&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;esm-bundler&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;cjs&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">&quot;exports&quot;</span><span class="token operator">:</span> <span class="token string">&quot;named&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;entryFile&quot;</span><span class="token operator">:</span> <span class="token string">&quot;src/index.ts&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;globals&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;jquery&quot;</span><span class="token operator">:</span> <span class="token string">&quot;$&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="参数详情">参数详情 <a href="#参数详情" class="header-anchor">#</a></h3> <ul><li><p><code>name(String)</code> 生成包的名称(全局变量名)。用于 <code>iife/umd</code> 包，同一页上的其他脚本可以访问它。</p></li> <li><p>entryFile(String) 入口文件。默认为 <code>src/index.ts</code>。</p></li> <li><p>exports(String) 使用什么导出模式。默认为 <code>named</code>。</p> <ul><li><p>default 如果你使用 export default ... 仅仅导出一个东西，那适合用这个</p></li> <li><p>named 如果你导出多个东西，适合用这个</p></li> <li><p>auto 根据 entry 模块导出的内容猜测你的意图</p></li> <li><p>none 如果你不导出任何内容 (例如，你正在构建应用程序，而不是库)，则适合用这个</p></li></ul></li> <li><p>globals(Object) 全局模块。默认为 <code>{}</code>。用于 <code>umd/iife</code> 包，提供将外部模块 ID 转换为全局模块的功能。</p></li> <li><p>formats(Array) 生成包的格式。默认为 <code>['cjs', 'esm-bundler']</code>。支持下列格式：</p> <ul><li><p>cjs CommonJS，适用于 Node。</p></li> <li><p>esm-bundler 将软件包保存为适用于 Node 的 ES 模块文件。</p></li> <li><p>esm-browser 将软件包保存为现代浏览器中引入的 ES 模块文件。</p></li> <li><p>global 一个自动执行的功能，适合作为 script 标签。</p></li></ul></li></ul> <h2 id="脚本">脚本 <a href="#脚本" class="header-anchor">#</a></h2> <h3 id="yarn-bootstrap"><code>yarn bootstrap</code> <a href="#yarn-bootstrap" class="header-anchor">#</a></h3> <p>创建库包的基本模板:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">yarn</span> bootstrap <span class="token operator">&lt;</span>target<span class="token operator">&gt;</span>
</code></pre></div><ul><li><p><code>target</code> 软件包名称；</p></li> <li><p><code>-f(--force)</code> 强制还原初始化设置</p></li> <li><p><code>-p(--private)</code> 私有化</p></li></ul> <h3 id="yarn-build"><code>yarn build</code> <a href="#yarn-build" class="header-anchor">#</a></h3> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">yarn</span> build <span class="token punctuation">[</span>targets<span class="token punctuation">]</span>
</code></pre></div><p>构建特定格式的包</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">yarn</span> build <span class="token punctuation">[</span>targets<span class="token punctuation">]</span> -f esm-browser,cjs
</code></pre></div><ul><li><p><code>targets</code> 要构建的软件包名称，支持模糊匹配，默认所有；</p></li> <li><p><code>-f(--formats)</code> 构建特定格式软件包, 多种格式指定为以逗号分隔的列表;</p> <ul><li><strong><code>global</code></strong></li> <li><strong><code>esm-bundler</code></strong></li> <li><strong><code>esm-browser</code></strong></li> <li><strong><code>cjs</code></strong></li></ul></li> <li><p><code>-s(--sourcemap)</code> 生成 sourcemap 文件。注意，这会使构建速度变慢;</p></li> <li><p><code>-t(--types)</code> 汇总 d.ts 文件;</p> <ul><li>在 <code>temp/&lt;packageName&gt;.api.md</code> 中生成 API 报告。该报告包含 <a href="https://api-extractor.com/" target="_blank" rel="noopener noreferrer">api-extractor<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 发出的潜在警告。</li> <li>在 <code>temp/&lt;packageName&gt;.api.json</code> 中生成 API 模型 json。该文件可用于生成导出的 API 的 Markdown 版本。</li></ul></li> <li><p><code>-r(--release)</code> 是否发布的包;</p></li> <li><p><code>-d(--devOnly)</code> 仅打包开发环境包;</p></li> <li><p><code>-p(--prodOnly)</code> 仅打包生产环境包；</p></li> <li><p><code>-a(--all)</code> 匹配所有符合规则的目标，否则只匹配第一次被匹配的的目标。</p></li></ul> <h3 id="yarn-dev"><code>yarn dev</code> <a href="#yarn-dev" class="header-anchor">#</a></h3> <p>监视文件更改。当您要在 HTML 页面中加载内部版本以进行快速调试时, 这很有用:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">yarn</span> dev <span class="token operator">&lt;</span>target<span class="token operator">&gt;</span>
</code></pre></div><ul><li><p><code>target</code> 要监听的包名，必填;</p></li> <li><p><code>-f(--formats)</code> 构建特定格式软件包, 多种格式指定为以逗号分隔的列表, 和 <code>build</code> 脚本一样;</p></li> <li><p><code>-s(--sourcemap)</code> 生成 sourcemap 文件。注意，这会使构建速度变慢。</p></li></ul> <h3 id="yarn-release"><code>yarn release</code> <a href="#yarn-release" class="header-anchor">#</a></h3> <p>自动发布 packages 下的所有包:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">yarn</span> release
</code></pre></div><ul><li><p><code>--tag</code> 发行标签;</p></li> <li><p><code>--preid</code> 预发行版本标识符;</p></li> <li><p><code>--dry</code> 只打印运行命令但不运行(会更新版本号);</p></li> <li><p><code>--skipTests</code> 跳过测试;</p></li> <li><p><code>--skipBuild</code> 跳过打包;</p></li></ul> <h3 id="执行测试">执行测试 <a href="#执行测试" class="header-anchor">#</a></h3> <p>可以使用 <a href="https://jestjs.io/docs/en/cli" target="_blank" rel="noopener noreferrer">Jest CLI 选项<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 运行本地测试</span>
<span class="token function">yarn</span> <span class="token builtin class-name">test</span>

<span class="token comment"># 在监视模式下运行测试</span>
<span class="token function">yarn</span> <span class="token builtin class-name">test</span> --watch

<span class="token comment"># 在特定文件中运行测试</span>
<span class="token function">yarn</span> <span class="token builtin class-name">test</span> fileName

<span class="token comment"># 运行特定文件测试在一个特定的文件</span>
<span class="token function">yarn</span> <span class="token builtin class-name">test</span> fileName -t <span class="token string">'test name'</span>
</code></pre></div><p>会在 <code>coverage</code> 目录下生成测试覆盖率报告</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">yarn</span> test:coverage

<span class="token comment"># 提交代码覆盖率报告</span>
<span class="token function">yarn</span> codecov
</code></pre></div><h3 id="格式检测">格式检测 <a href="#格式检测" class="header-anchor">#</a></h3> <p>检测目录结构</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">yarn</span> ls-lint
</code></pre></div><p>检测 ESLint</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">yarn</span> lint
</code></pre></div><h3 id="修复代码">修复代码 <a href="#修复代码" class="header-anchor">#</a></h3> <p>运行所有匹配 <code>fix:*</code> 的命令</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">yarn</span> fix
</code></pre></div><p>基于 <code>ESLint</code> 修复 <code>.ts</code> 和 <code>.js</code> 文件</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">yarn</span> fix:lint
</code></pre></div><p>基于 <code>prettier</code> 修复 <code>.json</code> 文件</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">yarn</span> fix:json
</code></pre></div><p>基于 <code>prettier</code> 修复 <code>.ts</code> 和 <code>.js</code> 文件</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">yarn</span> prettier
</code></pre></div><h3 id="文档操作">文档操作 <a href="#文档操作" class="header-anchor">#</a></h3> <p>使用 <code>vuepress</code> 生成文档静态站</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">yarn</span> docs:dev
</code></pre></div><p>会在<code>.vuepress/dist</code>目录下生成静态资源包</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">yarn</span> docs:build
</code></pre></div><h3 id="提交-git">提交 Git <a href="#提交-git" class="header-anchor">#</a></h3> <p>通过 <code>cz-customizable</code> 适配器定制项目的提交说明：</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">yarn</span> commit
</code></pre></div><h3 id="生成日志">生成日志 <a href="#生成日志" class="header-anchor">#</a></h3> <p>会在项目根目录下生成 <code>CHANGELOG.md</code> 日志文件</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">yarn</span> changelog
</code></pre></div><h2 id="项目结构">项目结构 <a href="#项目结构" class="header-anchor">#</a></h2> <p>此存储库采用 <a href="https://en.wikipedia.org/wiki/Monorepo" target="_blank" rel="noopener noreferrer">monorepo<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 管理方式，在 <code>packages</code> 目录下托管多个关联包:</p> <ul><li><p><code>internal</code>: 内部使用的一个公共方法集合，提供给其他包共用，不作为公共包发布。</p></li> <li><p><code>validator</code>: 检测器，各种判断方法的汇总集合。</p></li></ul> <h3 id="导入包">导入包 <a href="#导入包" class="header-anchor">#</a></h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> isObject <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@roshin/extends-validator'</span><span class="token punctuation">;</span>
</code></pre></div><p>这可以通过以下几种配置实现：</p> <ul><li><p>对于 TypeScript，在 <code>tsconfig.json</code> 中配置 <code>compilerOptions.path</code></p></li> <li><p>对于 Jset，在 <code>jest.config.js</code> 中配置 <code>moduleNameMapper</code></p></li> <li><p>对于纯 Node.js，它们使用<a href="https://yarnpkg.com/blog/2017/08/02/introducing-workspaces/" target="_blank" rel="noopener noreferrer">Yarn Workspaces<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>链接。</p></li></ul> <h3 id="包依赖">包依赖 <a href="#包依赖" class="header-anchor">#</a></h3> <p>导入包时需要遵循一些规则：</p> <ul><li><p>软件包不要直接使用相对路径引入，对于强依赖的包，应该在 <code>package.json</code> 中列出</p></li> <li><p>软件包 <code>internal</code> 不应该作为依赖包使用，应该直接使用别名或者<a href="https://yarnpkg.com/blog/2017/08/02/introducing-workspaces/" target="_blank" rel="noopener noreferrer">Yarn Workspaces<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li></ul> <h2 id="测试">测试 <a href="#测试" class="header-anchor">#</a></h2> <p>每个软件包中的单元测试应放在 <code>__tests__</code> 文件夹中。有关如何编写新的测试规范，请查阅<a href="https://jestjs.io/docs/en/using-matchers" target="_blank" rel="noopener noreferrer">Jest 文档<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>和现有测试用例。</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/tool-packages/docs.extend/edit/master/src/guide/repo.md" target="_blank" rel="noopener noreferrer">帮助我们改善此页面！</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2021-03-17 01:19:45</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev"><a href="/guide/commitConvention.html" class="prev"><i aria-label="icon: left" class="anticon anticon-left"><svg viewBox="64 64 896 896" focusable="false" data-icon="left" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8a31.86 31.86 0 0 0 0 50.3l450.8 352.1c5.3 4.1 12.9.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281 360-281.1c3.8-3 6.1-7.7 6.1-12.6z"></path></svg></i>
        Git 消息提交规范
      </a></span> <span class="next"><a href="/guide/pull.html">
        Pull Request
        <i aria-label="icon: right" class="anticon anticon-right"><svg viewBox="64 64 896 896" focusable="false" data-icon="right" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M765.7 486.8L314.9 134.7A7.97 7.97 0 0 0 302 141v77.3c0 4.9 2.3 9.6 6.1 12.6l360 281.1-360 281.1c-3.9 3-6.1 7.7-6.1 12.6V883c0 6.7 7.7 10.4 12.9 6.3l450.8-352.1a31.96 31.96 0 0 0 0-50.4z"></path></svg></i></a></span></p></div> </main> <!----></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.a155bb3e.js" defer></script><script src="/assets/js/2.aab8771d.js" defer></script><script src="/assets/js/18.aceae0a3.js" defer></script><script src="/assets/js/3.4a115da5.js" defer></script>
  </body>
</html>