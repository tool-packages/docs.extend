(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{759:function(a,s,t){"use strict";t.r(s);var e=t(72),r=Object(e.a)({},(function(){var a=this,s=a.$createElement,t=a._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"如何使用该仓库"}},[a._v("如何使用该仓库 "),t("a",{staticClass:"header-anchor",attrs:{href:"#如何使用该仓库"}},[a._v("#")])]),a._v(" "),t("h2",{attrs:{id:"开发设置"}},[a._v("开发设置 "),t("a",{staticClass:"header-anchor",attrs:{href:"#开发设置"}},[a._v("#")])]),a._v(" "),t("p",[a._v("你需要 "),t("a",{attrs:{href:"http://nodejs.org",target:"_blank",rel:"noopener noreferrer"}},[a._v("Node.js 10+"),t("OutboundLink")],1),a._v(", 和 "),t("a",{attrs:{href:"https://yarnpkg.com/en/docs/install",target:"_blank",rel:"noopener noreferrer"}},[a._v("Yarn 1.x"),t("OutboundLink")],1)]),a._v(" "),t("p",[a._v("克隆项目并切换到相应的开发分支")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("git")]),a._v(" clone https://github.com/extend-js/extend.git\n")])])]),t("p",[a._v("安装依赖")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("yarn")]),a._v("\n")])])]),t("p",[a._v("所用工具的概述:")]),a._v(" "),t("ul",[t("li",[t("p",[t("a",{attrs:{href:"https://www.typescriptlang.org/",target:"_blank",rel:"noopener noreferrer"}},[a._v("TypeScript"),t("OutboundLink")],1),a._v(" 作为开发语言")])]),a._v(" "),t("li",[t("p",[t("a",{attrs:{href:"https://rollupjs.org",target:"_blank",rel:"noopener noreferrer"}},[a._v("Rollup"),t("OutboundLink")],1),a._v(" 用于打包")])]),a._v(" "),t("li",[t("p",[t("a",{attrs:{href:"https://jestjs.io/",target:"_blank",rel:"noopener noreferrer"}},[a._v("Jest"),t("OutboundLink")],1),a._v(" 用于单元测试")])]),a._v(" "),t("li",[t("p",[t("a",{attrs:{href:"https://prettier.io/",target:"_blank",rel:"noopener noreferrer"}},[a._v("Prettier"),t("OutboundLink")],1),a._v(" 用于代码格式化")])])]),a._v(" "),t("h2",{attrs:{id:"构建配置"}},[a._v("构建配置 "),t("a",{staticClass:"header-anchor",attrs:{href:"#构建配置"}},[a._v("#")])]),a._v(" "),t("p",[a._v("默认情况下, 软件包可以通过 "),t("code",[a._v("package.json")]),a._v(" 中的 "),t("code",[a._v("buildOptions")]),a._v(" 字段作为打包配置选项：")]),a._v(" "),t("div",{staticClass:"language-json extra-class"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[a._v('"buildOptions"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[a._v('"name"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"js-extend"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[a._v('"formats"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"esm-bundler"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"cjs"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[a._v('"exports"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"named"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[a._v('"entryFile"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"src/index.ts"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[a._v('"globals"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n      "),t("span",{pre:!0,attrs:{class:"token property"}},[a._v('"jquery"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"$"')]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),t("h3",{attrs:{id:"参数详情"}},[a._v("参数详情 "),t("a",{staticClass:"header-anchor",attrs:{href:"#参数详情"}},[a._v("#")])]),a._v(" "),t("ul",[t("li",[t("p",[t("code",[a._v("name(String)")]),a._v(" 生成包的名称(全局变量名)。用于 "),t("code",[a._v("iife/umd")]),a._v(" 包，同一页上的其他脚本可以访问它。")])]),a._v(" "),t("li",[t("p",[a._v("entryFile(String) 入口文件。默认为 "),t("code",[a._v("src/index.ts")]),a._v("。")])]),a._v(" "),t("li",[t("p",[a._v("exports(String) 使用什么导出模式。默认为 "),t("code",[a._v("named")]),a._v("。")]),a._v(" "),t("ul",[t("li",[t("p",[a._v("default 如果你使用 export default ... 仅仅导出一个东西，那适合用这个")])]),a._v(" "),t("li",[t("p",[a._v("named 如果你导出多个东西，适合用这个")])]),a._v(" "),t("li",[t("p",[a._v("auto 根据 entry 模块导出的内容猜测你的意图")])]),a._v(" "),t("li",[t("p",[a._v("none 如果你不导出任何内容 (例如，你正在构建应用程序，而不是库)，则适合用这个")])])])]),a._v(" "),t("li",[t("p",[a._v("globals(Object) 全局模块。默认为 "),t("code",[a._v("{}")]),a._v("。用于 "),t("code",[a._v("umd/iife")]),a._v(" 包，提供将外部模块 ID 转换为全局模块的功能。")])]),a._v(" "),t("li",[t("p",[a._v("formats(Array) 生成包的格式。默认为 "),t("code",[a._v("['cjs', 'esm-bundler']")]),a._v("。支持下列格式：")]),a._v(" "),t("ul",[t("li",[t("p",[a._v("cjs CommonJS，适用于 Node。")])]),a._v(" "),t("li",[t("p",[a._v("esm-bundler 将软件包保存为适用于 Node 的 ES 模块文件。")])]),a._v(" "),t("li",[t("p",[a._v("esm-browser 将软件包保存为现代浏览器中引入的 ES 模块文件。")])]),a._v(" "),t("li",[t("p",[a._v("global 一个自动执行的功能，适合作为 script 标签。")])])])])]),a._v(" "),t("h2",{attrs:{id:"脚本"}},[a._v("脚本 "),t("a",{staticClass:"header-anchor",attrs:{href:"#脚本"}},[a._v("#")])]),a._v(" "),t("h3",{attrs:{id:"yarn-bootstrap"}},[t("code",[a._v("yarn bootstrap")]),a._v(" "),t("a",{staticClass:"header-anchor",attrs:{href:"#yarn-bootstrap"}},[a._v("#")])]),a._v(" "),t("p",[a._v("创建库包的基本模板:")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("yarn")]),a._v(" bootstrap "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("target"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n")])])]),t("ul",[t("li",[t("p",[t("code",[a._v("target")]),a._v(" 软件包名称；")])]),a._v(" "),t("li",[t("p",[t("code",[a._v("-f(--force)")]),a._v(" 强制还原初始化设置")])]),a._v(" "),t("li",[t("p",[t("code",[a._v("-p(--private)")]),a._v(" 私有化")])])]),a._v(" "),t("h3",{attrs:{id:"yarn-build"}},[t("code",[a._v("yarn build")]),a._v(" "),t("a",{staticClass:"header-anchor",attrs:{href:"#yarn-build"}},[a._v("#")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("yarn")]),a._v(" build "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("targets"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n")])])]),t("p",[a._v("构建特定格式的包")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("yarn")]),a._v(" build "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("targets"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" -f esm-browser,cjs\n")])])]),t("ul",[t("li",[t("p",[t("code",[a._v("targets")]),a._v(" 要构建的软件包名称，支持模糊匹配，默认所有；")])]),a._v(" "),t("li",[t("p",[t("code",[a._v("-f(--formats)")]),a._v(" 构建特定格式软件包, 多种格式指定为以逗号分隔的列表;")]),a._v(" "),t("ul",[t("li",[t("strong",[t("code",[a._v("global")])])]),a._v(" "),t("li",[t("strong",[t("code",[a._v("esm-bundler")])])]),a._v(" "),t("li",[t("strong",[t("code",[a._v("esm-browser")])])]),a._v(" "),t("li",[t("strong",[t("code",[a._v("cjs")])])])])]),a._v(" "),t("li",[t("p",[t("code",[a._v("-s(--sourcemap)")]),a._v(" 生成 sourcemap 文件。注意，这会使构建速度变慢;")])]),a._v(" "),t("li",[t("p",[t("code",[a._v("-t(--types)")]),a._v(" 汇总 d.ts 文件;")]),a._v(" "),t("ul",[t("li",[a._v("在 "),t("code",[a._v("temp/<packageName>.api.md")]),a._v(" 中生成 API 报告。该报告包含 "),t("a",{attrs:{href:"https://api-extractor.com/",target:"_blank",rel:"noopener noreferrer"}},[a._v("api-extractor"),t("OutboundLink")],1),a._v(" 发出的潜在警告。")]),a._v(" "),t("li",[a._v("在 "),t("code",[a._v("temp/<packageName>.api.json")]),a._v(" 中生成 API 模型 json。该文件可用于生成导出的 API 的 Markdown 版本。")])])]),a._v(" "),t("li",[t("p",[t("code",[a._v("-r(--release)")]),a._v(" 是否发布的包;")])]),a._v(" "),t("li",[t("p",[t("code",[a._v("-d(--devOnly)")]),a._v(" 仅打包开发环境包;")])]),a._v(" "),t("li",[t("p",[t("code",[a._v("-p(--prodOnly)")]),a._v(" 仅打包生产环境包；")])]),a._v(" "),t("li",[t("p",[t("code",[a._v("-a(--all)")]),a._v(" 匹配所有符合规则的目标，否则只匹配第一次被匹配的的目标。")])])]),a._v(" "),t("h3",{attrs:{id:"yarn-dev"}},[t("code",[a._v("yarn dev")]),a._v(" "),t("a",{staticClass:"header-anchor",attrs:{href:"#yarn-dev"}},[a._v("#")])]),a._v(" "),t("p",[a._v("监视文件更改。当您要在 HTML 页面中加载内部版本以进行快速调试时, 这很有用:")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("yarn")]),a._v(" dev "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("target"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n")])])]),t("ul",[t("li",[t("p",[t("code",[a._v("target")]),a._v(" 要监听的包名，必填;")])]),a._v(" "),t("li",[t("p",[t("code",[a._v("-f(--formats)")]),a._v(" 构建特定格式软件包, 多种格式指定为以逗号分隔的列表, 和 "),t("code",[a._v("build")]),a._v(" 脚本一样;")])]),a._v(" "),t("li",[t("p",[t("code",[a._v("-s(--sourcemap)")]),a._v(" 生成 sourcemap 文件。注意，这会使构建速度变慢。")])])]),a._v(" "),t("h3",{attrs:{id:"yarn-release"}},[t("code",[a._v("yarn release")]),a._v(" "),t("a",{staticClass:"header-anchor",attrs:{href:"#yarn-release"}},[a._v("#")])]),a._v(" "),t("p",[a._v("自动发布 packages 下的所有包:")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("yarn")]),a._v(" release\n")])])]),t("ul",[t("li",[t("p",[t("code",[a._v("--tag")]),a._v(" 发行标签;")])]),a._v(" "),t("li",[t("p",[t("code",[a._v("--preid")]),a._v(" 预发行版本标识符;")])]),a._v(" "),t("li",[t("p",[t("code",[a._v("--dry")]),a._v(" 只打印运行命令但不运行(会更新版本号);")])]),a._v(" "),t("li",[t("p",[t("code",[a._v("--skipTests")]),a._v(" 跳过测试;")])]),a._v(" "),t("li",[t("p",[t("code",[a._v("--skipBuild")]),a._v(" 跳过打包;")])])]),a._v(" "),t("h3",{attrs:{id:"执行测试"}},[a._v("执行测试 "),t("a",{staticClass:"header-anchor",attrs:{href:"#执行测试"}},[a._v("#")])]),a._v(" "),t("p",[a._v("可以使用 "),t("a",{attrs:{href:"https://jestjs.io/docs/en/cli",target:"_blank",rel:"noopener noreferrer"}},[a._v("Jest CLI 选项"),t("OutboundLink")],1),a._v("。")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 运行本地测试")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("yarn")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("test")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 在监视模式下运行测试")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("yarn")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("test")]),a._v(" --watch\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 在特定文件中运行测试")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("yarn")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("test")]),a._v(" fileName\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 运行特定文件测试在一个特定的文件")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("yarn")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("test")]),a._v(" fileName -t "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'test name'")]),a._v("\n")])])]),t("p",[a._v("会在 "),t("code",[a._v("coverage")]),a._v(" 目录下生成测试覆盖率报告")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("yarn")]),a._v(" test:coverage\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 提交代码覆盖率报告")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("yarn")]),a._v(" codecov\n")])])]),t("h3",{attrs:{id:"格式检测"}},[a._v("格式检测 "),t("a",{staticClass:"header-anchor",attrs:{href:"#格式检测"}},[a._v("#")])]),a._v(" "),t("p",[a._v("检测目录结构")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("yarn")]),a._v(" ls-lint\n")])])]),t("p",[a._v("检测 ESLint")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("yarn")]),a._v(" lint\n")])])]),t("h3",{attrs:{id:"修复代码"}},[a._v("修复代码 "),t("a",{staticClass:"header-anchor",attrs:{href:"#修复代码"}},[a._v("#")])]),a._v(" "),t("p",[a._v("运行所有匹配 "),t("code",[a._v("fix:*")]),a._v(" 的命令")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("yarn")]),a._v(" fix\n")])])]),t("p",[a._v("基于 "),t("code",[a._v("ESLint")]),a._v(" 修复 "),t("code",[a._v(".ts")]),a._v(" 和 "),t("code",[a._v(".js")]),a._v(" 文件")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("yarn")]),a._v(" fix:lint\n")])])]),t("p",[a._v("基于 "),t("code",[a._v("prettier")]),a._v(" 修复 "),t("code",[a._v(".json")]),a._v(" 文件")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("yarn")]),a._v(" fix:json\n")])])]),t("p",[a._v("基于 "),t("code",[a._v("prettier")]),a._v(" 修复 "),t("code",[a._v(".ts")]),a._v(" 和 "),t("code",[a._v(".js")]),a._v(" 文件")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("yarn")]),a._v(" prettier\n")])])]),t("h3",{attrs:{id:"文档操作"}},[a._v("文档操作 "),t("a",{staticClass:"header-anchor",attrs:{href:"#文档操作"}},[a._v("#")])]),a._v(" "),t("p",[a._v("使用 "),t("code",[a._v("vuepress")]),a._v(" 生成文档静态站")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("yarn")]),a._v(" docs:dev\n")])])]),t("p",[a._v("会在"),t("code",[a._v(".vuepress/dist")]),a._v("目录下生成静态资源包")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("yarn")]),a._v(" docs:build\n")])])]),t("h3",{attrs:{id:"提交-git"}},[a._v("提交 Git "),t("a",{staticClass:"header-anchor",attrs:{href:"#提交-git"}},[a._v("#")])]),a._v(" "),t("p",[a._v("通过 "),t("code",[a._v("cz-customizable")]),a._v(" 适配器定制项目的提交说明：")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("yarn")]),a._v(" commit\n")])])]),t("h3",{attrs:{id:"生成日志"}},[a._v("生成日志 "),t("a",{staticClass:"header-anchor",attrs:{href:"#生成日志"}},[a._v("#")])]),a._v(" "),t("p",[a._v("会在项目根目录下生成 "),t("code",[a._v("CHANGELOG.md")]),a._v(" 日志文件")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("yarn")]),a._v(" changelog\n")])])]),t("h2",{attrs:{id:"项目结构"}},[a._v("项目结构 "),t("a",{staticClass:"header-anchor",attrs:{href:"#项目结构"}},[a._v("#")])]),a._v(" "),t("p",[a._v("此存储库采用 "),t("a",{attrs:{href:"https://en.wikipedia.org/wiki/Monorepo",target:"_blank",rel:"noopener noreferrer"}},[a._v("monorepo"),t("OutboundLink")],1),a._v(" 管理方式，在 "),t("code",[a._v("packages")]),a._v(" 目录下托管多个关联包:")]),a._v(" "),t("ul",[t("li",[t("p",[t("code",[a._v("internal")]),a._v(": 内部使用的一个公共方法集合，提供给其他包共用，不作为公共包发布。")])]),a._v(" "),t("li",[t("p",[t("code",[a._v("validator")]),a._v(": 检测器，各种判断方法的汇总集合。")])])]),a._v(" "),t("h3",{attrs:{id:"导入包"}},[a._v("导入包 "),t("a",{staticClass:"header-anchor",attrs:{href:"#导入包"}},[a._v("#")])]),a._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("import")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v(" isObject "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("from")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'@roshin/extends-validator'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])])]),t("p",[a._v("这可以通过以下几种配置实现：")]),a._v(" "),t("ul",[t("li",[t("p",[a._v("对于 TypeScript，在 "),t("code",[a._v("tsconfig.json")]),a._v(" 中配置 "),t("code",[a._v("compilerOptions.path")])])]),a._v(" "),t("li",[t("p",[a._v("对于 Jset，在 "),t("code",[a._v("jest.config.js")]),a._v(" 中配置 "),t("code",[a._v("moduleNameMapper")])])]),a._v(" "),t("li",[t("p",[a._v("对于纯 Node.js，它们使用"),t("a",{attrs:{href:"https://yarnpkg.com/blog/2017/08/02/introducing-workspaces/",target:"_blank",rel:"noopener noreferrer"}},[a._v("Yarn Workspaces"),t("OutboundLink")],1),a._v("链接。")])])]),a._v(" "),t("h3",{attrs:{id:"包依赖"}},[a._v("包依赖 "),t("a",{staticClass:"header-anchor",attrs:{href:"#包依赖"}},[a._v("#")])]),a._v(" "),t("p",[a._v("导入包时需要遵循一些规则：")]),a._v(" "),t("ul",[t("li",[t("p",[a._v("软件包不要直接使用相对路径引入，对于强依赖的包，应该在 "),t("code",[a._v("package.json")]),a._v(" 中列出")])]),a._v(" "),t("li",[t("p",[a._v("软件包 "),t("code",[a._v("internal")]),a._v(" 不应该作为依赖包使用，应该直接使用别名或者"),t("a",{attrs:{href:"https://yarnpkg.com/blog/2017/08/02/introducing-workspaces/",target:"_blank",rel:"noopener noreferrer"}},[a._v("Yarn Workspaces"),t("OutboundLink")],1)])])]),a._v(" "),t("h2",{attrs:{id:"测试"}},[a._v("测试 "),t("a",{staticClass:"header-anchor",attrs:{href:"#测试"}},[a._v("#")])]),a._v(" "),t("p",[a._v("每个软件包中的单元测试应放在 "),t("code",[a._v("__tests__")]),a._v(" 文件夹中。有关如何编写新的测试规范，请查阅"),t("a",{attrs:{href:"https://jestjs.io/docs/en/using-matchers",target:"_blank",rel:"noopener noreferrer"}},[a._v("Jest 文档"),t("OutboundLink")],1),a._v("和现有测试用例。")])])}),[],!1,null,null,null);s.default=r.exports}}]);